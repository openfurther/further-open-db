/* Oracle Drop all sequences and tables */
/* Run as DB Owner User, Not Sys! 
   You can run each block separately from Begin to End */

SET SERVEROUTPUT ON;

BEGIN

  --DROP SEQUENCES
  BEGIN
    DBMS_OUTPUT.PUT_LINE('--BEG DROP SEQUENCES');
    FOR I IN (SELECT SEQUENCE_NAME
                FROM USER_SEQUENCES
               ORDER BY SEQUENCE_NAME) LOOP
      DBMS_OUTPUT.PUT_LINE('DROP SEQUENCE ' || I.SEQUENCE_NAME ||';');
      --OPTIONALLY EXECUTE
      --EXECUTE IMMEDIATE 'DROP SEQUENCE ' || I.SEQUENCE_NAME;
    END LOOP;
    DBMS_OUTPUT.PUT_LINE('--END DROP SEQUENCES');
    DBMS_OUTPUT.NEW_LINE;
  END;

  --DROP TABLES
  BEGIN
    DBMS_OUTPUT.PUT_LINE('--BEG DROP TABLES');
    FOR I IN (SELECT TABLE_NAME
                FROM USER_TABLES
               ORDER BY TABLE_NAME) LOOP
      DBMS_OUTPUT.PUT_LINE('DROP TABLE ' || I.TABLE_NAME || ' CASCADE CONSTRAINTS;'); 
      --OPTIONALLY EXECUTE
      --EXECUTE IMMEDIATE 'DROP TABLE ' || I.TABLE_NAME || ' CASCADE CONSTRAINTS';
    END LOOP;
    DBMS_OUTPUT.PUT_LINE('--END DROP TABLES');
    DBMS_OUTPUT.NEW_LINE;
  END;

  -- DROP VIEWS
  BEGIN
    DBMS_OUTPUT.PUT_LINE('--BEG DROP VIEWS');
    FOR I IN (SELECT VIEW_NAME
                FROM USER_VIEWS
               ORDER BY VIEW_NAME) LOOP
      DBMS_OUTPUT.PUT_LINE('DROP VIEW ' || I.VIEW_NAME || ' CASCADE CONSTRAINTS;'); 
      --OPTIONALLY EXECUTE
      --EXECUTE IMMEDIATE 'DROP VIEW ' || I.VIEW_NAME || ' CASCADE CONSTRAINTS';
    END LOOP;
    DBMS_OUTPUT.PUT_LINE('--END DROP VIEWS');
    DBMS_OUTPUT.NEW_LINE;
  END;

  --DROP FOREIGN KEYS
  BEGIN
    DBMS_OUTPUT.PUT_LINE('--BEG DROP FOREIGN KEYS');
    FOR I IN (SELECT TABLE_NAME, CONSTRAINT_NAME
                FROM USER_CONSTRAINTS 
               WHERE CONSTRAINT_TYPE='R'
               ORDER BY TABLE_NAME, CONSTRAINT_NAME) LOOP
      DBMS_OUTPUT.PUT_LINE('ALTER TABLE ' || I.TABLE_NAME || ' DROP CONSTRAINT ' || I.CONSTRAINT_NAME ||';');
      --OPTIONALLY EXECUTE
      --EXECUTE IMMEDIATE 'ALTER TABLE ' || I.TABLE_NAME || ' DROP CONSTRAINT ' || I.CONSTRAINT_NAME ;
    END LOOP;
    DBMS_OUTPUT.PUT_LINE('--END DROP FOREIGN KEYS');
    DBMS_OUTPUT.NEW_LINE;
  END;

  --DISABLE FOREIGN KEYS
  BEGIN
    DBMS_OUTPUT.PUT_LINE('--BEG DISABLE FOREIGN KEYS');
    FOR I IN (SELECT TABLE_NAME, CONSTRAINT_NAME
                FROM USER_CONSTRAINTS 
               WHERE CONSTRAINT_TYPE='R'
               ORDER BY TABLE_NAME, CONSTRAINT_NAME) LOOP
      DBMS_OUTPUT.PUT_LINE('ALTER TABLE ' || I.TABLE_NAME || ' DISABLE CONSTRAINT ' || I.CONSTRAINT_NAME ||';');
      --OPTIONALLY EXECUTE
      --EXECUTE IMMEDIATE 'ALTER TABLE ' || I.TABLE_NAME || ' DISABLE CONSTRAINT ' || I.CONSTRAINT_NAME ;
    END LOOP;
    DBMS_OUTPUT.PUT_LINE('--END DISABLE FOREIGN KEYS');
    DBMS_OUTPUT.NEW_LINE;
  END;

  --ENABLE FOREIGN KEYS
  BEGIN
    DBMS_OUTPUT.PUT_LINE('--BEG ENABLE FOREIGN KEYS');
    FOR I IN (SELECT TABLE_NAME, CONSTRAINT_NAME
                FROM USER_CONSTRAINTS 
               WHERE CONSTRAINT_TYPE='R'
               ORDER BY TABLE_NAME, CONSTRAINT_NAME) LOOP
      DBMS_OUTPUT.PUT_LINE('ALTER TABLE ' || I.TABLE_NAME || ' ENABLE CONSTRAINT ' || I.CONSTRAINT_NAME ||';');
      --OPTIONALLY EXECUTE
      --EXECUTE IMMEDIATE 'ALTER TABLE ' || I.TABLE_NAME || ' ENABLE CONSTRAINT ' || I.CONSTRAINT_NAME ;
    END LOOP;
    DBMS_OUTPUT.PUT_LINE('--END ENABLE FOREIGN KEYS');
    DBMS_OUTPUT.NEW_LINE;
  END;

END;
/



/* Output */
/*

--DROP Sequences for FMDR
drop sequence APP_LOG_ID_SEQ;
drop sequence APP_PRIV_ID_SEQ;
drop sequence APP_ROLE_ID_SEQ;
drop sequence APP_ROLE_PRIV_ID_SEQ;
drop sequence APP_USER_ID_SEQ;
drop sequence APP_USER_ROLE_ID_SEQ;
drop sequence ASSET_ASSOC_PROP_ID_SEQ;
drop sequence ASSET_ASSOC_SEQ_ID;
drop sequence ASSET_PROP_ID_SEQ;
drop sequence ASSET_RESOURCE_COMMENT_ID_SEQ;
drop sequence ASSET_RESOURCE_ID_SEQ;
drop sequence ASSET_RESOURCE_NTTN_ID_SEQ;
drop sequence ASSET_RESOURCE_TYPE_ID_SEQ;
drop sequence ASSET_TYPE_PROP_ID_SEQ;
drop sequence ASSET_TYPE_RES_TYP_ID_SEQ;
drop sequence ASSET_VERSION_ID_SEQ;
drop sequence ATTR_ID_SEQ;
drop sequence ATTR_PROP_ID_SEQ;
drop sequence HIBERNATE_SEQUENCE;
drop sequence LOOKUP_GROUP_ID_SEQ;
drop sequence LOOKUP_GROUP_VALUE_ID_SEQ;
drop sequence LOOKUP_VALUE_ID_SEQ;
drop sequence OBJ_ATTR_MAP_ID_SEQ;
drop sequence OBJ_ID_SEQ;

--DROP Tables for FMDR
drop table ASSET_RESOURCE_COMMENT CASCADE CONSTRAINTS;
drop table APP_LOG CASCADE CONSTRAINTS;
drop table APP_PRIV CASCADE CONSTRAINTS;
drop table APP_PROP CASCADE CONSTRAINTS;
drop table APP_ROLE CASCADE CONSTRAINTS;
drop table APP_ROLE_PRIV CASCADE CONSTRAINTS;
drop table APP_USER CASCADE CONSTRAINTS;
drop table APP_USER_PROP CASCADE CONSTRAINTS;
drop table APP_USER_ROLE CASCADE CONSTRAINTS;
drop table ASSET CASCADE CONSTRAINTS;
drop table ASSET_ASSOC CASCADE CONSTRAINTS;
drop table ASSET_ASSOC_PROP CASCADE CONSTRAINTS;
drop table ASSET_PROP CASCADE CONSTRAINTS;
drop table ASSET_RESOURCE CASCADE CONSTRAINTS;
drop table ASSET_RESOURCE_ASSOC CASCADE CONSTRAINTS;
drop table ASSET_RESOURCE_TYPE CASCADE CONSTRAINTS;
drop table ASSET_RESOURCE_VERSION CASCADE CONSTRAINTS;
drop table ASSET_TRANS_MAP CASCADE CONSTRAINTS;
drop table ASSET_TYPE_PROP CASCADE CONSTRAINTS;
drop table ASSET_TYPE_RESOURCE_TYPE CASCADE CONSTRAINTS;
drop table ASSET_VERSION CASCADE CONSTRAINTS;
drop table ASSOCIATION CASCADE CONSTRAINTS;
drop table LOOKUP_GROUP CASCADE CONSTRAINTS;
drop table LOOKUP_GROUP_VALUE CASCADE CONSTRAINTS;
drop table LOOKUP_VALUE CASCADE CONSTRAINTS;
drop table STATS_TABLE CASCADE CONSTRAINTS;
drop table STATS_TABLE_CELL CASCADE CONSTRAINTS;

--DROP Views for FMDR
drop view APP_USER_PROP_V CASCADE CONSTRAINTS;
drop view ASSET_ASSOC_V CASCADE CONSTRAINTS;
drop view ASSET_RESOURCE_V CASCADE CONSTRAINTS;
drop view ASSET_SUMMARY_V CASCADE CONSTRAINTS;
drop view ASSET_TRANS_MAP_V CASCADE CONSTRAINTS;
drop view ASSET_V CASCADE CONSTRAINTS;
drop view LOOKUP_V CASCADE CONSTRAINTS;
drop view USERNAMES_V CASCADE CONSTRAINTS;

--DROP Foreign Keys for FMDR
ALTER TABLE FMDR.APP_PROP DROP CONSTRAINT APP_PROP_LOOKUP_GROUP_FK1;
ALTER TABLE FMDR.APP_ROLE_PRIV DROP CONSTRAINT APP_ROLE_PRIV_APP_PRIV_FK1;
ALTER TABLE FMDR.APP_ROLE_PRIV DROP CONSTRAINT APP_ROLE_PRIV_APP_ROLE_FK1;
ALTER TABLE FMDR.APP_USER_PROP DROP CONSTRAINT APP_USER_PROP_APP_PROP_FK1;
ALTER TABLE FMDR.APP_USER_PROP DROP CONSTRAINT APP_USER_PROP_APP_USER_FK1;
ALTER TABLE FMDR.APP_USER_ROLE DROP CONSTRAINT APP_USER_ROLE_APP_ROLE_FK1;
ALTER TABLE FMDR.APP_USER_ROLE DROP CONSTRAINT APP_USER_ROLE_APP_USER_FK1;
ALTER TABLE FMDR.ASSET DROP CONSTRAINT ASSET_NAMESPACE_ASSET_ID_FK;
ALTER TABLE FMDR.ASSET DROP CONSTRAINT ASSET_TYPE_ASSET_ID_FK;
ALTER TABLE FMDR.ASSET_RESOURCE DROP CONSTRAINT ASSET_RESOURCE_ASSET_FK1;
ALTER TABLE FMDR.ASSET_RESOURCE DROP CONSTRAINT ASSET_RESOURCE_ASSET_RESO_FK1;
ALTER TABLE FMDR.ASSET_RESOURCE DROP CONSTRAINT ASSET_RESOURCE_ASSET_VERS_FK1;
ALTER TABLE FMDR.ASSET_RESOURCE_ASSOC DROP CONSTRAINT ASSET_RESOURCE_ASSOC_ASSO_FK1;
ALTER TABLE FMDR.ASSET_RESOURCE_COMMENT DROP CONSTRAINT ASSET_RESOURCE_COMMENT_AS_FK1;
ALTER TABLE FMDR.ASSET_TYPE_RESOURCE_TYPE DROP CONSTRAINT ASSET_TYPE_RESOURCE_TYPE_FK1;
ALTER TABLE FMDR.ASSET_TYPE_RESOURCE_TYPE DROP CONSTRAINT ASSET_TYPE_RESOURCE_TYPE_FK2;
ALTER TABLE FMDR.ASSET_VERSION DROP CONSTRAINT ASSET_VERSION_ASSET_ID_FK;
ALTER TABLE FMDR.LOOKUP_GROUP_VALUE DROP CONSTRAINT LOOKUP_GROUP_VALUE_LOOKUP_FK1;
ALTER TABLE FMDR.LOOKUP_GROUP_VALUE DROP CONSTRAINT LOOKUP_GROUP_VALUE_LOOKUP_FK2;

--DISABLE Foreign Keys for FMDR
ALTER TABLE FMDR.APP_PROP DISABLE CONSTRAINT APP_PROP_LOOKUP_GROUP_FK1;
ALTER TABLE FMDR.APP_ROLE_PRIV DISABLE CONSTRAINT APP_ROLE_PRIV_APP_PRIV_FK1;
ALTER TABLE FMDR.APP_ROLE_PRIV DISABLE CONSTRAINT APP_ROLE_PRIV_APP_ROLE_FK1;
ALTER TABLE FMDR.APP_USER_PROP DISABLE CONSTRAINT APP_USER_PROP_APP_PROP_FK1;
ALTER TABLE FMDR.APP_USER_PROP DISABLE CONSTRAINT APP_USER_PROP_APP_USER_FK1;
ALTER TABLE FMDR.APP_USER_ROLE DISABLE CONSTRAINT APP_USER_ROLE_APP_ROLE_FK1;
ALTER TABLE FMDR.APP_USER_ROLE DISABLE CONSTRAINT APP_USER_ROLE_APP_USER_FK1;
ALTER TABLE FMDR.ASSET DISABLE CONSTRAINT ASSET_NAMESPACE_ASSET_ID_FK;
ALTER TABLE FMDR.ASSET DISABLE CONSTRAINT ASSET_TYPE_ASSET_ID_FK;
ALTER TABLE FMDR.ASSET_RESOURCE DISABLE CONSTRAINT ASSET_RESOURCE_ASSET_FK1;
ALTER TABLE FMDR.ASSET_RESOURCE DISABLE CONSTRAINT ASSET_RESOURCE_ASSET_RESO_FK1;
ALTER TABLE FMDR.ASSET_RESOURCE DISABLE CONSTRAINT ASSET_RESOURCE_ASSET_VERS_FK1;
ALTER TABLE FMDR.ASSET_RESOURCE_ASSOC DISABLE CONSTRAINT ASSET_RESOURCE_ASSOC_ASSO_FK1;
ALTER TABLE FMDR.ASSET_RESOURCE_COMMENT DISABLE CONSTRAINT ASSET_RESOURCE_COMMENT_AS_FK1;
ALTER TABLE FMDR.ASSET_TYPE_RESOURCE_TYPE DISABLE CONSTRAINT ASSET_TYPE_RESOURCE_TYPE_FK1;
ALTER TABLE FMDR.ASSET_TYPE_RESOURCE_TYPE DISABLE CONSTRAINT ASSET_TYPE_RESOURCE_TYPE_FK2;
ALTER TABLE FMDR.ASSET_VERSION DISABLE CONSTRAINT ASSET_VERSION_ASSET_ID_FK;
ALTER TABLE FMDR.LOOKUP_GROUP_VALUE DISABLE CONSTRAINT LOOKUP_GROUP_VALUE_LOOKUP_FK1;
ALTER TABLE FMDR.LOOKUP_GROUP_VALUE DISABLE CONSTRAINT LOOKUP_GROUP_VALUE_LOOKUP_FK2;

*/
